version: '3.8'

services:
  backend:
    container_name: meetro_backend
    build:
      context: .
      dockerfile: backend/Dockerfile
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
    # command: uvicorn main:app --host 0.0.0.0 --port 8000 

  frontend:
    container_name: meetro_frontend
    build:
      context: ./frontend
      dockerfile: Dockerfile 
    
    ports:
      # ğŸš€ ä¿®æ­£: å°‡ä¸»æ©Ÿç«¯å£è¨­å®šç‚ºæ¥­ç•Œå¸¸ç”¨çš„ 8080
      # æ ¼å¼: "ä¸»æ©Ÿç«¯å£:å®¹å™¨ç«¯å£" -> (8080:5173)
      - "8080:5173" 
    
    volumes:
      # æ˜ å°„å‰ç«¯åŸå§‹ç¢¼ï¼Œç”¨æ–¼ç†±é‡è¼‰ (HMR)
      - ./frontend:/app 
      # æ’é™¤ node_modulesï¼Œç¢ºä¿ä½¿ç”¨å®¹å™¨å…§å®‰è£çš„ç‰ˆæœ¬
      - /app/node_modules 
      
    # åŸ·è¡Œ Vite é–‹ç™¼ä¼ºæœå™¨ï¼Œä¸¦ç¶å®šåˆ° 0.0.0.0 è®“å¤–éƒ¨å¯é€£ç·šï¼Œç«¯å£ä»ç‚º Vite é è¨­çš„ 5173
    command: npm run dev -- --host 0.0.0.0 --port 5173
      
    depends_on:
      - backend